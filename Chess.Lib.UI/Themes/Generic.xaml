<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Chess.Lib.UI"
		xmlns:lconv="clr-namespace:Chess.Lib.UI.Converters"
	>
	<lconv:PieceToImageConverter x:Key="p2ic"/>
	<Style TargetType="{x:Type local:ChessBoard}">
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:ChessBoard}">
					<Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
						<AdornerDecorator Name="adorner">
							<Grid>
								<Grid Name="board"/>
							</Grid>
						</AdornerDecorator>
					</Border>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
	<Style TargetType="{x:Type local:ChessSquare}">
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:ChessSquare}">
					<Border Background="{TemplateBinding Background}">
						<Grid>
							<Image Name="piece"/>
							<TextBlock HorizontalAlignment="Left" VerticalAlignment="Bottom" FontSize="8" Foreground="Red"
												 Name="txt" Margin="2,0"/>
						</Grid>
					</Border>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
	<Style TargetType="{x:Type local:PlayerView}">
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:PlayerView}">
					<Grid Name="grid" DataContext="{x:Null}">
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="*"/>
						</Grid.RowDefinitions>
						<Border BorderBrush="Black" BorderThickness="1">
							<TextBlock Text="{Binding Name}" FontWeight="{Binding FontWeight}"/>
						</Border>
						<GroupBox Name="removed" Grid.Row="2" Header="Removed Pieces" Visibility="Collapsed">
							<ItemsControl ItemsSource="{Binding Pieces}">
								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<Image Source="{Binding Converter={StaticResource p2ic}}" Width="14" Height="14"/>
									</DataTemplate>
								</ItemsControl.ItemTemplate>
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<UniformGrid Columns="8"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>
							</ItemsControl>
						</GroupBox>
					</Grid>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
	<Style TargetType="{x:Type local:MovesView}">
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:MovesView}">
					<Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
						<DataGrid Name="moves" IsReadOnly="True" AutoGenerateColumns="False">
							<DataGrid.Columns>
								<DataGridTextColumn Header="#" Binding="{Binding MoveNumber}"/>
								<DataGridTextColumn Header="White" Binding="{Binding WhiteMove.AlgebraicMove}"/>
								<DataGridTextColumn Header="Black" Binding="{Binding BlackMove.AlgebraicMove}"/>
							</DataGrid.Columns>
						</DataGrid>
					</Border>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
	<Style TargetType="{x:Type local:ChessGame}">
		<Style.Resources>
			<local:BoardDimensionConverter x:Key="brddim"/>
		</Style.Resources>
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:ChessGame}">
					<Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}"
									Padding="{TemplateBinding Padding}">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>
							<DockPanel Grid.Column="0" Width="160">
								<local:PlayerView DockPanel.Dock="Top" Hue="Dark" Game="{TemplateBinding Game}"/>
								<local:PlayerView DockPanel.Dock="Bottom" Hue="Light" Game="{TemplateBinding Game}"/>
								<local:MovesView Game="{TemplateBinding Game}"/>
							</DockPanel>
							<local:ChessBoard Grid.Column="1" Game="{TemplateBinding Game}" 
																Width="{Binding RelativeSource={RelativeSource TemplatedParent},Path=BoardDimension}" 
																Height="{Binding RelativeSource={RelativeSource TemplatedParent},Path=BoardDimension}" />
						</Grid>
					</Border>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>
</ResourceDictionary>
